<html>
    <head>
        <title>Executor Demo Page</title>
        <script type="text/javascript">
            blueprints = [];
            ephox = {bolt: {kernel: {define: function (id, deps, definition) {
                blueprints.push({ id: id, deps: deps });
            }}}};
        </script>
        <script type="text/javascript" src="../../gen/loader.js"></script>
        <script type="text/javascript" src="../demo_util.js"></script>
    </head>
    <body>
        <div id="evaller"></div>
        <div id="injector"></div>

        <script type="text/javascript">
            var evaller = document.getElementById("evaller");
            var injector = document.getElementById("injector");

            fail(evaller, "evaller test did not run");
            fail(injector, "injector test did not run");

            ephox.bolt.loader.executor.evaller.execute(
                "define('evaller_test', ['some_dep'], function() {});",
                function () {
                    if (blueprints[0].id === 'evaller_test' && blueprints[0].deps[0] === 'some_dep')
                        pass(evaller, 'define was called from evaller');
                    else
                        fail(evaller, 'define was not called from evaller');
                },
                function (message) {
                    fail(evaller, message);
                }
            );

            blueprints = [];

            ephox.bolt.loader.executor.injector.execute(
                "define('injector_test', ['some_dep'], function() {});",
                function () {
                    if (blueprints[0].id === 'injector_test' && blueprints[0].deps[0] === 'some_dep')
                        pass(injector, 'define was called from injector');
                    else
                        fail(injector, 'define was not called from injector');
                },
                function (message) {
                    fail(injector, message);
                }
            );
        </script>

    </body>
</html>