#!/bin/sh

usage() {
    echo "usage: `basename $0` dev"
    echo "    or `basename $0` prod"
    echo "    or `basename $0` compile"
}

fail() {
    echo $2 >&2
    usage >&2
    exit $1
}

base=`dirname $0`

if [ $# -lt 1 ]; then
    fail 1 "error: must specify mode."
fi

mode="$1"; shift

if echo "$mode" | egrep -v -q 'dev|prod|compile'; then
    fail 1 "invalid mode [$mode], must be one of dev|prod|compile"
fi

# FIX add some defaults and argument checking, just delegate for now.

exec node $base/jsc.js "$mode" "$@"
